<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Financial Exorcist</title>
  <link rel="stylesheet" href="/css/sanctuary.css">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <h1>The Financial Exorcist</h1>
      <p class="subtitle">Track your spending. Face your demons.</p>
    </header>

    <!-- Dashboard Section -->
    <section class="dashboard-section">
      <div class="purity-card">
        <h2>Soul Purity</h2>
        <div class="purity-score">
          <div class="purity-circle">
            <span id="soulPurity">100</span><span class="percent">%</span>
          </div>
        </div>
        <div class="purity-breakdown">
          <h3>Sin Distribution (in dollars)</h3>
          <div id="breakdownList" class="breakdown-list">
            <!-- Populated by JS -->
          </div>
        </div>
        <div class="dashboard-stats">
          <p><strong>Total Offerings:</strong> <span id="totalOfferings">0</span></p>
          <p><strong>Exorcised:</strong> <span id="exorcisedCount">0</span></p>
          <p><strong>Total Possessions:</strong> <span id="totalPossessions">0</span></p>
        </div>
      </div>
    </section>

    <!-- Transaction List Section -->
    <section class="transactions-section">
      <div class="section-header">
        <h2>Recent Offerings</h2>
        <button id="addButton" class="btn btn-primary">+ Add Offering</button>
      </div>
      <div id="transactionsList" class="transactions-list">
        <!-- Populated by JS -->
      </div>
    </section>

    <!-- Add Transaction Modal -->
    <div id="addModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Record an Offering</h2>
          <button class="btn-close" id="closeAddModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="addForm">
            <div class="form-group">
              <label for="amount">Amount ($)</label>
              <input type="number" id="amount" name="amount" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <input type="text" id="description" name="description" maxlength="200" required>
            </div>
            <div class="form-group">
              <label for="category">Sin Category</label>
              <select id="category" name="category" required>
                <option value="">-- Select a sin --</option>
                <option value="GLUTTONY">Gluttony (Food & Drink)</option>
                <option value="VANITY">Vanity (Fashion & Beauty)</option>
                <option value="SLOTH">Sloth (Entertainment & Comfort)</option>
                <option value="GREED">Greed (Money & Wealth)</option>
                <option value="LUST">Lust (Luxury & Desire)</option>
                <option value="WRATH">Wrath (Anger & Revenge)</option>
              </select>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">Record Offering</button>
              <button type="button" class="btn btn-secondary" id="cancelAddForm">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Ritual Chamber Modal -->
    <div id="ritualModal" class="modal hidden">
      <div class="modal-content ritual-content">
        <div class="modal-header ritual-header">
          <h2 id="ritualTitle">Ritual of Cleansing</h2>
        </div>
        <div class="modal-body ritual-body">
          <div id="ritualContent">
            <!-- Populated by ritualChamber.js -->
          </div>
        </div>
        <div class="modal-footer ritual-footer">
          <div class="progress-bar">
            <div id="ritualProgress" class="progress-fill"></div>
          </div>
          <button id="exorciseButton" class="btn btn-primary" disabled>Exorcise</button>
        </div>
      </div>
    </div>

    <!-- Settings / Help -->
    <footer class="footer">
      <button id="exportButton" class="btn btn-secondary btn-small">Export Data</button>
      <button id="purgeButton" class="btn btn-danger btn-small">Purge All Data</button>
      <p class="footer-text">May the spirits guide your financial path.</p>
    </footer>
  </div>

  <script src="/js/app.js"></script>
  <script src="/js/ritualChamber.js"></script>
  <script src="/js/dashboard.js"></script>
</body>
</html>
